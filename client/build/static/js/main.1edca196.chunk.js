(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),s=a.n(c),o=(a(96),a(16)),u=a(7),l=a.n(u),i=a(10),m=a(5),p=a(11),b=a.n(p),d=a(15),f=a(58);var v=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),o=Object(m.a)(s,2),u=o[0],p=o[1],v=Object(n.useState)(),j=Object(m.a)(v,2),O=j[0],E=j[1],g=Object(n.useState)([]),h=Object(m.a)(g,2),w=h[0],x=h[1],k=Object(n.useState)(),S=Object(m.a)(k,2),P=S[0],N=S[1],y=Object(n.useState)(),A=Object(m.a)(y,2),I=A[0],C=A[1],U=Object(n.useState)([]),L=Object(m.a)(U,2),R=L[0],q=L[1],D=Object(n.useState)([]),z=Object(m.a)(D,2),_=z[0],H=z[1],J=Object(n.useState)([]),T=Object(m.a)(J,2),W=T[0],B=T[1];return Object(n.useEffect)((function(){e&&function(){var t=Object(i.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("/user/infor",{headers:{Authorization:e}});case 3:a=t.sent,E(a.data.name),x(a.data.username),N(a.data._id),c(!0),q(a.data.posts),H(a.data.followers),B(a.data.following),C(a.data.img),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),alert(t.t0.response.data.msg);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}()()}),[e]),{isLogged:[r,c],callback:[u,p],name:[O,E],addPost:function(){var t=Object(i.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",alert("Please login"));case 2:return q([].concat(Object(f.a)(R),[Object(d.a)({},a)])),t.next=5,b.a.patch("/user/addpost",{posts:[].concat(Object(f.a)(R),[Object(d.a)({},a)])},{headers:{Authorization:e}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),username:[w,x],id:[P,N],image:[I,C],posts:[R,q],follwers:[_,H],following:[W,B]}};var j=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(m.a)(c,2),o=s[0],u=s[1];return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/posts");case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o]),{posts:[a,r],callback:[o,u]}},O=Object(n.createContext)(),E=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(m.a)(a,2),s=c[0],o=c[1],u=function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/user/refresh_token");case 2:t=e.sent,o(t.data.accesstoken);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){localStorage.getItem("firstLogin")&&u()}),[]);var p={token:[s,o],UserAPI:v(s),PostsAPI:j()};return r.a.createElement(O.Provider,{value:p},t)};a(115);var g=function(){var e=Object(n.useContext)(O),t=Object(m.a)(e.UserAPI.isLogged,1)[0],a=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/user/logout");case 2:localStorage.clear(),window.location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("header",null,r.a.createElement("div",{className:"logo"},r.a.createElement("h1",null,r.a.createElement(o.b,{to:"/"},t?"Shower Thoughts":""))),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},t?"Home":"")),t?r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/",onClick:a},"Logout"))):r.a.createElement("li",null,r.a.createElement(o.b,{to:"/login"},"Login | Register"))))},h=a(8),w=a(27);a(121);var x=function(){var e=Object(n.useState)({username:"",password:""}),t=Object(m.a)(e,2),a=t[0],c=t[1],s=function(e){var t=e.target,n=t.name,r=t.value;c(Object(d.a)(Object(d.a)({},a),{},Object(w.a)({},n,r)))},u=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.post("/user/login",Object(d.a)({},a));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("form",{onSubmit:u},r.a.createElement("h2",null,"Login"),r.a.createElement("input",{type:"username",name:"username",required:!0,placeholder:"Username",value:a.username,onChange:s}),r.a.createElement("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:a.password,onChange:s}),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement(o.b,{to:"/register"},"Register"))))};var k=function(){var e=Object(n.useState)({name:"",username:"",password:""}),t=Object(m.a)(e,2),a=t[0],c=t[1],s=function(e){var t=e.target,n=t.name,r=t.value;c(Object(d.a)(Object(d.a)({},a),{},Object(w.a)({},n,r)))},u=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.post("/user/register",Object(d.a)({},a));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("form",{onSubmit:u},r.a.createElement("h2",null,"Register"),r.a.createElement("input",{type:"text",name:"name",required:!0,placeholder:"Name",value:a.name,onChange:s}),r.a.createElement("input",{type:"username",name:"username",required:!0,placeholder:"Username",value:a.username,onChange:s}),r.a.createElement("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:a.password,onChange:s}),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit"},"Register"),r.a.createElement(o.b,{to:"/login"},"Login"))))},S=(a(122),a(123),a(86)),P=a.n(S),N=a(82),y=a.n(N);var A=function(e){var t=e.post,a=Object(n.useContext)(O),c=Object(m.a)(a.token,1)[0],s=Object(m.a)(a.UserAPI.id,1)[0],o=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to delete this post?")){e.next=5;break}return e.next=3,b.a.delete("/api/posts/".concat(t),{headers:{Authorization:c}});case 3:a=e.sent,alert(a.data.msg);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"post-box"},r.a.createElement("div",{className:"user-info"},r.a.createElement("h2",{className:"name"},t.name),r.a.createElement("h2",{className:"username"},"@",t.username),s===t.id?r.a.createElement("button",null,r.a.createElement(y.a,{onClick:function(){return o(t._id)},className:"delete"})):""),r.a.createElement("h1",null,t.post),r.a.createElement("div",{className:"post-info"},r.a.createElement("div",{className:"likes-box"},r.a.createElement("p",{className:"likes"},t.likes),r.a.createElement("button",null,r.a.createElement(P.a,null))),r.a.createElement("p",{className:"date"},new Date(t.createdAt).toLocaleString()))))};var I=function(){var e=Object(n.useContext)(O),t=Object(m.a)(e.PostsAPI.posts,2),a=t[0],c=(t[1],Object(m.a)(e.token,1)[0],Object(m.a)(e.PostsAPI.callback,2));return c[0],c[1],Object(m.a)(e.UserAPI.id,1)[0],r.a.createElement("div",{className:"post-made"},a.slice(0).reverse().map((function(e){return r.a.createElement(A,{key:e._id,post:e})})))},C=a(191),U=(a(163),{id:"",name:"",username:"",post:"",replies:[],likes:0,images:null});var L=function(){var e=Object(n.useContext)(O),t=Object(m.a)(e.UserAPI.username,1)[0],a=Object(m.a)(e.UserAPI.name,1)[0],c=Object(m.a)(e.UserAPI.id,1)[0],s=Object(m.a)(e.UserAPI.isLogged,1)[0],o=Object(m.a)(e.UserAPI.callback,2),u=o[0],p=o[1],f=Object(m.a)(e.token,1)[0],v=Object(n.useState)(U),j=Object(m.a)(v,2),E=j[0],g=j[1],h=Object(n.useState)([]),x=Object(m.a)(h,2),k=(x[0],x[1],e.UserAPI.addPost),S=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,s){e.next=4;break}return e.abrupt("return",alert("You're not logged in"));case 4:return e.next=6,b.a.post("/api/posts",Object(d.a)({},E),{headers:{Authorization:f}});case 6:k(E),g(U),p(!u),window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:S},r.a.createElement("div",null,r.a.createElement("div",{value:E.id=c}),r.a.createElement("div",{value:E.name=a}),r.a.createElement("div",{value:E.username=t}),r.a.createElement("div",{className:"text-search"},r.a.createElement(C.a,{id:"outlined-basic",label:"Whats on your mind ".concat(s?a:""),variant:"outlined",type:"text",name:"post",className:"in-post",value:E.post,onChange:function(e){var t=e.target,a=t.name,n=t.value;g(Object(d.a)(Object(d.a)({},E),{},Object(w.a)({},a,n)))}}),r.a.createElement("button",{type:"submit",className:"btn-post"}))))};var R=function(){var e=Object(n.useContext)(O),t=Object(m.a)(e.UserAPI.isLogged,1)[0],a=Object(m.a)(e.UserAPI.name,1)[0];return r.a.createElement("div",null,r.a.createElement("h1",{className:"home-page"}," ",t?"Welcome back ".concat(a):"Home"),r.a.createElement(L,{className:"post-bar"}),r.a.createElement(I,{className:"post-made"}))};var q=function(){return r.a.createElement("div",null,"404 | Not Found")};var D=function(){return r.a.createElement("div",null,"Home",r.a.createElement("button",null,r.a.createElement(o.b,{to:"/register"},"REGISTER")))};var z=function(){var e=Object(n.useContext)(O),t=Object(m.a)(e.UserAPI.isLogged,1)[0];return r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/",exact:!0,component:t?R:D}),r.a.createElement(h.a,{path:"/login",exact:!0,component:t?q:x}),r.a.createElement(h.a,{path:"/register",exact:!0,component:t?q:k}),r.a.createElement(h.a,{path:"*",exact:!0,component:q}))};var _=function(){return r.a.createElement(E,null,r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(g,null),r.a.createElement(z,null))))};s.a.render(r.a.createElement(_,null),document.getElementById("root"))},91:function(e,t,a){e.exports=a(164)},96:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.1edca196.chunk.js.map